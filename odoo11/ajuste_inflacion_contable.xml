<odoo>

    <record id="inflation_adjustment_form" model="ir.ui.view">
        <field name="name">inflation.adjustment.form</field>
        <field name="model">inflation.adjustment</field>
        <field name="arch" type="xml">
            <form string="Ajuste por InflaciÃ³n">
                <sheet>
                    <group>
                        <group colspan="4">
                            <field name="company_id" invisible="1" />
                            <field name="name" />
                            <field name="account_id" domain="[('company_id', '=', company_id), ('deprecated', '=', False)]" options="{'no_create': True, 'no_open': True}"/>
                            <field name="journal_id" domain="[('company_id', '=', company_id)]" options="{'no_create': True, 'no_open': True}"/>
                            <field name="tipo" widget="radio" />
                            <!-- <field name="analytic_account_id" groups="analytic.group_analytic_accounting"/> -->
                        </group>
                        <group colspan="4">
                            <label for="open_closure_entry"/>
                            <div class="o_row">
                                <field name="open_closure_entry" widget="radio" nolabel="1"/>
                                <div attrs="{'invisible': [('open_closure_entry', '=', 'no')]}">
                                    <label for="closure_move_id"/>
                                    <field name="closure_move_id" attrs="{'required': [('open_closure_entry', '=', 'yes')]}" options="{'no_create': True, 'no_open': True}"/>
                                </div>
                                <div attrs="{'invisible': [('open_closure_entry', '=', 'no')]}">
                                    <label for="open_move_id"/>
                                    <field name="open_move_id" attrs="{'required': [('open_closure_entry', '=', 'yes')]}" options="{'no_create': True, 'no_open': True}"/>
                                </div>
                            </div>
                        </group>
                        <group colspan="1">
                            <label for="date_from"/>
                            <div class="o_row">
                                <field name="date_from"/>
                                <field name="start_index"/>
                            </div>
                            <label for="date_to"/>
                            <div class="o_row">
                                <field name="date_to"/>
                                <field name="end_index"/>
                            </div>
                        </group>
                    </group>
                    <button string="Generar" name="confirm" type="object" class="btn-primary"/>
                    <notebook>
                        <!-- Asientos generados -->
                        <page string="Asientos">
                            <field name="adjust_move_ids" widget="many2many">
                                <!-- context="{'tree_view_ref':'pyme_accounting.afip_acitivity_view_tree'}" -->
                                <tree>
                                    <field name="date" />
                                    <field name="name" />
                                    <field name="ref" />
                                    <field name="state" />
                                </tree>
                            </field>
                        </page>

                        <!-- Detalle de ajuste -->
                        <page string="Detalle">
                            <field name="adjustment_lines" invisible="1" />
                            <field name="adjustment_accounts" invisible="1" />
                            
                            <group>
                                <field name="filter_account_id" widget="selection"
                                    options="{'create': False, 'create_edit': False}"
                                    domain="[('id', 'in', adjustment_accounts)]" />
                            </group>

                            <field name="filtered_adjustment_lines">
                                <tree create="false" delete="false" editable="false">
                                    <field name="date" />
                                    <field name="account_id" />
                                    <field name="amount" sum="Total" />
                                    <field name="coef" />
                                    <field name="debit" sum="Total" />
                                    <field name="credit" sum="Total" />
                                </tree>
                            </field>
                        </page>
                    </notebook>

                    <footer>
                        <!-- <button string="Cancelar" class="btn-default" special="cancel"/> -->
                    </footer>
                </sheet>
            </form>
        </field>
    </record>

    <record id="inflation_adjustment_tree" model="ir.ui.view">
        <field name="name">inflation.adjustment.tree</field>
        <field name="model">inflation.adjustment</field>
        <field name="arch" type="xml">
            <tree>
                <field name="date_from" />
                <field name="date_to" />
                <field name="state" />
            </tree>
        </field>
    </record>

</odoo>