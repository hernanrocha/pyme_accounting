<odoo>

    <!-- FACTURA - FORM VIEW -->
    <record id="view_account_move_form" model="ir.ui.view">
        <field name="name">account.move.form</field>
        <field name="model">account.move</field>
        <field name="priority">50</field>
        <field name="arch" type="xml">
            <form string="Asiento contable" modifiers="{}">
                <header modifiers="{}">
                    <button name="action_post" string="Publicar" class="oe_highlight" type="object" attrs="{'invisible': ['|', '|', ('state', '!=', 'draft'), ('auto_post', '=', True), ('move_type', '!=', 'entry')]}" modifiers="{'invisible':['|','|',['state','!=','draft'],['auto_post','=',true],['move_type','!=','entry']]}" options="{}"/>
                    <button name="action_post" string="Confirmar" class="oe_highlight" type="object" attrs="{'invisible': ['|', '|', ('state', '!=', 'draft'), ('auto_post', '=', True), ('move_type', '=', 'entry')]}" modifiers="{'invisible':['|','|',['state','!=','draft'],['auto_post','=',true],['move_type','=','entry']]}" options="{}"/>
                    <button name="action_invoice_sent" type="object" string="Enviar e Imprimir" attrs="{'invisible':['|', '|', ('state', '!=', 'posted'), ('is_move_sent', '=', True), ('move_type', 'not in', ('out_invoice', 'out_refund'))]}" class="oe_highlight" modifiers="{'invisible':['|','|',['state','!=','posted'],['is_move_sent','=',true],['move_type','not in',['out_invoice','out_refund']]]}" options="{}"/>
                    <button name="action_invoice_sent" type="object" string="Enviar e Imprimir" attrs="{'invisible':['|', '|', ('state', '!=', 'posted'), ('is_move_sent', '=', False), ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund'))]}" modifiers="{'invisible':['|','|',['state','!=','posted'],['is_move_sent','=',false],['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund']]]}" options="{}"/>
                    <button name="action_register_payment" id="account_invoice_payment_btn" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', '|', ('state', '!=', 'posted'), ('payment_state', 'not in', ('partial', 'not_paid')), ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt')), ('authorized_transaction_ids', '!=', [])]}" context="{'dont_redirect_to_payments': True}" string="Registrar pago" modifiers="{'invisible':['|','|','|',['state','!=','posted'],['payment_state','not in',['partial','not_paid']],['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund','out_receipt','in_receipt']],['authorized_transaction_ids','!=',[]]]}" options="{}"/>
                    <field name="authorized_transaction_ids" invisible="1" can_create="true" can_write="true" modifiers="{'invisible':true,'readonly':true}" id="authorized_transaction_ids"/>
                    <button name="payment_action_capture" type="object" string="Capturar transacción" class="oe_highlight" attrs="{'invisible': ['|', '|', ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund')), ('state', '!=', 'posted'), ('authorized_transaction_ids', '=', [])]}" modifiers="{'invisible':['|','|',['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund']],['state','!=','posted'],['authorized_transaction_ids','=',[]]]}" options="{}"/>
                    <button name="payment_action_void" type="object" string="Transacción vacía" confirm="¿Estás seguro de que quieres anular la transacción autorizada? Esta acción no puede deshacerse." attrs="{'invisible': ['|', '|', ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund')), ('state', '!=', 'posted'), ('authorized_transaction_ids', '=', [])]}" modifiers="{'invisible':['|','|',['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund']],['state','!=','posted'],['authorized_transaction_ids','=',[]]]}" options="{}"/>
                    <button name="preview_invoice" type="object" string="Vista previa" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund'))]}" modifiers="{'invisible':[['move_type','not in',['out_invoice','out_refund']]]}" options="{}"/>
                    <button name="193" string="Asiento de reversión" type="action" attrs="{'invisible': ['|', ('move_type', '!=', 'entry'), '|', ('state', '!=', 'posted'), ('payment_state', '=', 'reversed')]}" modifiers="{'invisible':['|',['move_type','!=','entry'],'|',['state','!=','posted'],['payment_state','=','reversed']]}" options="{}"/>
                    <button name="action_reverse" string="Añadir factura rectificativa" type="object" attrs="{'invisible': ['|', ('move_type', 'not in', ('out_invoice', 'in_invoice')), ('state', '!=', 'posted')]}" modifiers="{'invisible':['|',['move_type','not in',['out_invoice','in_invoice']],['state','!=','posted']]}" options="{}"/>
                    <field name="debit_origin_id" invisible="1" on_change="1" can_create="true" can_write="true" modifiers="{'invisible':true,'readonly':true}" id="debit_origin_id"/>
                    <button name="262" string="Agregar nota débito" type="action" attrs="{'invisible': ['|', '|', ('debit_origin_id', '!=', False),                                         ('move_type', 'not in', ('out_invoice', 'in_invoice', 'out_refund', 'in_refund')), ('state', '!=', 'posted')]}" modifiers="{'invisible':['|','|',['debit_origin_id','!=',false],['move_type','not in',['out_invoice','in_invoice','out_refund','in_refund']],['state','!=','posted']]}" options="{}"/>
                    <button name="button_cancel" string="Cancelar asiento" type="object" attrs="{'invisible' : ['|', ('id', '=', False), ('state', '!=', 'draft')]}" modifiers="{'invisible':['|',['id','=',false],['state','!=','draft']]}" options="{}"/>
                    <field name="edi_show_cancel_button" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="edi_show_cancel_button"/>
                    <button name="button_cancel_posted_moves" string="Solicitar la cancelación de EDI" type="object" attrs="{'invisible' : [('edi_show_cancel_button', '=', False)]}" modifiers="{'invisible':[['edi_show_cancel_button','=',false]]}" options="{}"/>
                    <button name="button_draft" string="Restablecer a borrador" type="object" attrs="{'invisible' : [('show_reset_to_draft_button', '=', False)]}" modifiers="{'invisible':[['show_reset_to_draft_button','=',false]]}" options="{}"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,posted" on_change="1" modifiers="{'readonly':true,'required':true}" id="state"/>
                </header>
                <div class="alert alert-info" role="alert" style="margin-bottom:0px;" attrs="{'invisible': ['|', ('edi_web_services_to_process', 'in', ['', False]), ('state', '=', 'draft')]}" modifiers="{'invisible':['|',['edi_web_services_to_process','in',['',false]],['state','=','draft']]}">
                    <div modifiers="{}">
                        La Factura será envida de forma asíncrona a:
                                        
                        <field name="edi_web_services_to_process" class="oe_inline" modifiers="{'readonly':true}" id="edi_web_services_to_process"/>
                    </div>
                    <button name="action_process_edi_web_services" type="object" class="oe_link" string="Enviar ahora" modifiers="{}" options="{}"/>
                </div>
                <div class="alert alert-warning" role="alert" style="margin-bottom:0px;" attrs="{'invisible': [('edi_error_count', '=', 0)]}" modifiers="{'invisible':[['edi_error_count','=',0]]}">
                    <field name="edi_error_count" modifiers="{'readonly':true}" id="edi_error_count"/>
                    
                                    Error(es) de la facturación electrónica
                                    
                    <button name="263" type="action" class="oe_link oe_inline" string="⇒ Ver errores" modifiers="{}" options="{}"/>
                </div>
                <div class="alert alert-warning" role="alert" style="margin-bottom:0px;" attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('tax_lock_date_message', '=', False)]}" modifiers="{'invisible':['|',['state','!=','draft'],['tax_lock_date_message','=',false]]}">
                    <field name="tax_lock_date_message" nolabel="1" modifiers="{'readonly':true}" id="tax_lock_date_message"/>
                </div>
                <div class="alert alert-info" role="alert" style="margin-bottom:0px;" attrs="{'invisible': ['|', '|', ('move_type', 'not in', ('out_invoice', 'out_refund')), ('invoice_has_outstanding', '=', False), ('payment_state', 'not in', ('not_paid', 'partial'))]}" modifiers="{'invisible':['|','|',['move_type','not in',['out_invoice','out_refund']],['invoice_has_outstanding','=',false],['payment_state','not in',['not_paid','partial']]]}">
                    
                                    Tienes 
                    <bold modifiers="{}">
                        <a class="alert-link" href="#outstanding" role="button" modifiers="{}">
                            pagos pendientes
                        </a>
                    </bold>
                    para este cliente. Puedes asignarlos para marcar la factura como pagada.
                                
                </div>
                <div class="alert alert-info" role="alert" style="margin-bottom:0px;" attrs="{'invisible': ['|', '|', ('move_type', 'not in', ('in_invoice', 'in_refund')), ('invoice_has_outstanding', '=', False), ('payment_state', 'not in', ('not_paid', 'partial'))]}" modifiers="{'invisible':['|','|',['move_type','not in',['in_invoice','in_refund']],['invoice_has_outstanding','=',false],['payment_state','not in',['not_paid','partial']]]}">
                    
                                    Tienes 
                    <bold modifiers="{}">
                        <a class="alert-link" href="#outstanding" role="button" modifiers="{}">
                            débitos pendientes
                        </a>
                    </bold>
                    para este proveedor. Puedes asignarlos para marcar la factura como pagada.
                                
                </div>
                <div class="alert alert-info" role="alert" style="margin-bottom:0px;" attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('auto_post', '=', False)]}" modifiers="{'invisible':['|',['state','!=','draft'],['auto_post','=',false]]}">
                    
                                    Este movimiento está configurado para contabilizarse automáticamente en la fecha contable: 
                    <field name="date" readonly="1" on_change="1" modifiers="{'readonly':true,'required':true}" id="date"/>
                    .
                                
                </div>
                <sheet modifiers="{}">
                    <div name="button_box" class="oe_button_box" modifiers="{}">
                        <button name="open_reconcile_view" class="oe_stat_button" icon="fa-bars" type="object" attrs="{'invisible': ['|', '|', ('move_type', '!=', 'entry'), ('id', '=', False), ('has_reconciled_entries', '=', False)]}" string="Asientos conciliados" modifiers="{'invisible':['|','|',['move_type','!=','entry'],['id','=',false],['has_reconciled_entries','=',false]]}" options="{}"/>
                        <button type="object" class="oe_stat_button" name="action_view_debit_notes" icon="fa-plus" attrs="{'invisible': [('debit_note_count', '=', 0)]}" modifiers="{'invisible':[['debit_note_count','=',0]]}" options="{}">
                            <div class="o_field_widget o_stat_info" modifiers="{}">
                                <span class="o_stat_value" modifiers="{}">
                                    <field name="debit_note_count" modifiers="{'readonly':true}" id="debit_note_count"/>
                                </span>
                                <span class="o_stat_text" modifiers="{}">
                                    Nota Débito
                                </span>
                            </div>
                        </button>
                    </div>
                    <widget name="web_ribbon" title="Pagado" attrs="{'invisible': ['|', ('payment_state', '!=', 'paid'), ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}" modifiers="{'invisible':['|',['payment_state','!=','paid'],['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund','out_receipt','in_receipt']]]}"/>
                    <widget name="web_ribbon" title="En proceso de pago" attrs="{'invisible': ['|', ('payment_state', '!=', 'in_payment'), ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}" modifiers="{'invisible':['|',['payment_state','!=','in_payment'],['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund','out_receipt','in_receipt']]]}"/>
                    <widget name="web_ribbon" title="Parcial" attrs="{'invisible': ['|', ('payment_state', '!=', 'partial'), ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}" modifiers="{'invisible':['|',['payment_state','!=','partial'],['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund','out_receipt','in_receipt']]]}"/>
                    <widget name="web_ribbon" title="Revertido" bg_color="bg-danger" attrs="{'invisible': [('payment_state', '!=', 'reversed')]}" modifiers="{'invisible':[['payment_state','!=','reversed']]}"/>
                    <widget name="web_ribbon" text="Invoicing App Legacy" bg_color="bg-info" attrs="{'invisible': [('payment_state', '!=', 'invoicing_legacy')]}" tooltip="This entry has been generated through the Invoicing app, before installing Accounting. It has been disabled by the 'Invoicing Switch Threshold Date' setting so that it does not impact your accounting." modifiers="{'invisible':[['payment_state','!=','invoicing_legacy']]}"/>
                    <field name="id" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="id"/>
                    <field name="show_name_warning" invisible="1" modifiers="{'invisible':true}" id="show_name_warning"/>
                    <field name="posted_before" invisible="1" on_change="1" modifiers="{'invisible':true}" id="posted_before"/>
                    <field name="move_type" invisible="1" on_change="1" modifiers="{'invisible':true,'readonly':true,'required':true}" id="move_type"/>
                    <field name="payment_state" invisible="1" force_save="1" modifiers="{'invisible':true,'readonly':true}" id="payment_state"/>
                    <field name="invoice_filter_type_domain" invisible="1" on_change="1" modifiers="{'invisible':true,'readonly':true}" id="invoice_filter_type_domain"/>
                    <field name="suitable_journal_ids" invisible="1" can_create="true" can_write="true" modifiers="{'invisible':true,'readonly':true}" id="suitable_journal_ids"/>
                    <field name="company_currency_id" invisible="1" can_create="true" can_write="true" modifiers="{'invisible':true,'readonly':true}" id="company_currency_id"/>
                    <field name="commercial_partner_id" invisible="1" on_change="1" can_create="true" can_write="true" modifiers="{'invisible':true,'readonly':true}" id="commercial_partner_id"/>
                    <field name="bank_partner_id" invisible="1" can_create="true" can_write="true" modifiers="{'invisible':true,'readonly':true}" id="bank_partner_id"/>
                    <field name="display_qr_code" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="display_qr_code"/>
                    <field name="show_reset_to_draft_button" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="show_reset_to_draft_button"/>
                    <field name="invoice_has_outstanding" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="invoice_has_outstanding"/>
                    <field name="is_move_sent" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="is_move_sent"/>
                    <field name="invoice_has_matching_suspense_amount" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="invoice_has_matching_suspense_amount"/>
                    <field name="has_reconciled_entries" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="has_reconciled_entries"/>
                    <field name="restrict_mode_hash_table" invisible="1" on_change="1" modifiers="{'invisible':true,'readonly':true}" id="restrict_mode_hash_table"/>
                    <field name="country_code" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="country_code"/>
                    <div class="oe_title" modifiers="{}">
                        <span class="o_form_label" modifiers="{}">
                            <field name="move_type" attrs="{'invisible': [('move_type', '=', 'entry')]}" readonly="1" nolabel="1" on_change="1" modifiers="{'invisible':[['move_type','=','entry']],'readonly':true,'required':true}" id="move_type__2__"/>
                        </span>
                        <h1 modifiers="{}">
                            <span attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('name', '!=', '/')]}" modifiers="{'invisible':['|',['state','!=','draft'],['name','!=','/']]}">
                                Borrador
                            </span>
                        </h1>
                        <span class="text-warning" attrs="{'invisible': [('show_name_warning', '=', False)]}" modifiers="{'invisible':[['show_name_warning','=',false]]}">
                            El número más alto actual es 
                            <field name="highest_name" on_change="1" modifiers="{'readonly':true}" id="highest_name"/>
                            . Puede que quieras poner un número más alto aquí.
                        </span>
                        <h1 class="mt0" attrs="{'invisible':[('name', '=', '/'), ('posted_before', '=', False)]}" modifiers="{'invisible':[['name','=','/'],['posted_before','=',false]]}">
                            <field name="name" attrs="{'readonly': ['|', ('state', '!=', 'draft'), ('l10n_latam_use_documents', '=', True)]}" placeholder="JRNL/2016/00001" on_change="1" modifiers="{'readonly':['|',['state','!=','draft'],['l10n_latam_use_documents','=',true]]}" id="name"/>
                        </h1>
                    </div>
                    <group modifiers="{}">
                        <group id="header_left_group" modifiers="{}">
                            <div class="o_td_label" modifiers="{}">
                                <label for="partner_id" string="Cliente" style="font-weight:bold;" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'out_receipt'))]}" modifiers="{'invisible':[['move_type','not in',['out_invoice','out_refund','out_receipt']]]}"/>
                                <label for="partner_id" string="Proveedor" style="font-weight:bold;" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'in_refund', 'in_receipt'))]}" modifiers="{'invisible':[['move_type','not in',['in_invoice','in_refund','in_receipt']]]}"/>
                            </div>
                            <field name="partner_id" widget="res_partner_many2one" nolabel="1" context="{                                             'res_partner_search_mode': (context.get('default_move_type', 'entry') in ('out_invoice', 'out_refund', 'out_receipt') and 'customer') or (context.get('default_move_type', 'entry') in ('in_invoice', 'in_refund', 'in_receipt') and 'supplier') or False,                                             'show_address': 1, 'default_is_company': True, 'show_vat': True}" options="{'always_reload': True, 'no_quick_create': True}" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}" on_change="1" can_create="true" can_write="true" modifiers="{'invisible':[['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund','out_receipt','in_receipt']]],'readonly':[['state','not in',['draft']]]}" id="partner_id"/>
                            <field name="partner_shipping_id" on_change="1" can_create="true" can_write="true" invisible="1" modifiers="{'invisible':true,'readonly':[['state','not in',['draft']]]}" id="partner_shipping_id"/>
                            <label for="ref" string="Referencia Factura" attrs="{'invisible':[('move_type', 'not in', ('in_invoice', 'in_receipt', 'in_refund'))]}" modifiers="{'invisible':[['move_type','not in',['in_invoice','in_receipt','in_refund']]]}"/>
                            <field name="ref" nolabel="1" attrs="{'invisible':[('move_type', 'not in', ('in_invoice', 'in_receipt', 'in_refund'))]}" modifiers="{'invisible':[['move_type','not in',['in_invoice','in_receipt','in_refund']]]}" id="ref"/>
                            <field name="ref" attrs="{'invisible':[('move_type', 'in', ('in_invoice', 'in_receipt', 'in_refund', 'out_invoice', 'out_refund'))]}" modifiers="{'invisible':[['move_type','in',['in_invoice','in_receipt','in_refund','out_invoice','out_refund']]]}" id="ref__3__"/>
                            <field name="payment_reference" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))], 'readonly': [('state', '!=', 'draft')]}" on_change="1" modifiers="{'invisible':[['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund','out_receipt','in_receipt']]],'readonly':[['state','!=','draft']]}" id="payment_reference"/>
                            <field name="partner_bank_id" context="{'default_partner_id': bank_partner_id}" domain="[('partner_id', '=', bank_partner_id)]" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'in_refund', 'in_receipt'))], 'readonly': [('state', '!=', 'draft')]}" can_create="true" can_write="true" modifiers="{'invisible':[['move_type','not in',['in_invoice','in_refund','in_receipt']]],'readonly':[['state','!=','draft']]}" id="partner_bank_id"/>
                            <label name="invoice_vendor_bill_id_label" for="invoice_vendor_bill_id" string="Auto-completar" class="oe_edit_only" attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('move_type', '!=', 'in_invoice')]}" invisible="1" modifiers="{'invisible':true}"/>
                            <field name="invoice_vendor_bill_id" nolabel="1" class="oe_edit_only" attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('move_type', '!=', 'in_invoice')]}" domain="[('company_id', '=', company_id), ('partner_id','child_of', [partner_id]), ('move_type','=','in_invoice')]" placeholder="Selecciona una factura de proveedor antigua" options="{'no_create': True}" context="{'show_total_amount': True}" invisible="1" on_change="1" can_create="true" can_write="true" modifiers="{'invisible':true}" id="invoice_vendor_bill_id"/>
                            <field name="purchase_id" invisible="1" on_change="1" can_create="true" can_write="true" modifiers="{'invisible':true,'readonly':[['state','not in',['draft']]]}" id="purchase_id"/>
                            <label for="purchase_vendor_bill_id" string="Completar automáticamente" class="oe_edit_only" attrs="{'invisible': ['|', ('state','!=','draft'), ('move_type', '!=', 'in_invoice')]}" modifiers="{'invisible':['|',['state','!=','draft'],['move_type','!=','in_invoice']]}"/>
                            <field name="purchase_vendor_bill_id" nolabel="1" attrs="{'invisible': ['|', ('state','!=','draft'), ('move_type', '!=', 'in_invoice')]}" class="oe_edit_only" domain="partner_id and [('company_id', '=', company_id), ('partner_id','child_of', [partner_id])] or [('company_id', '=', company_id)]" placeholder="Seleccionar un pedido de compra o factura antiguos" context="{'show_total_amount': True}" options="{'no_create': True, 'no_open': True}" on_change="1" can_create="false" can_write="false" modifiers="{'invisible':['|',['state','!=','draft'],['move_type','!=','in_invoice']],'readonly':[['state','not in',['draft']]]}" id="purchase_vendor_bill_id"/>
                        </group>
                        <group id="header_right_group" modifiers="{}">
                            <div class="o_td_label" modifiers="{}">
                                <label for="invoice_date" string="Fecha de factura" style="font-weight:bold;" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'out_receipt'))]}" modifiers="{'invisible':[['move_type','not in',['out_invoice','out_refund','out_receipt']]]}"/>
                                <label for="invoice_date" string="Fecha de la factura" style="font-weight:bold;" attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'in_refund', 'in_receipt'))]}" modifiers="{'invisible':[['move_type','not in',['in_invoice','in_refund','in_receipt']]]}"/>
                            </div>
                            <field name="invoice_date" nolabel="1" options="{'datepicker': {'warn_future': true}}" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}" on_change="1" modifiers="{'invisible':[['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund','out_receipt','in_receipt']]],'readonly':[['state','not in',['draft']]]}" id="invoice_date"/>
                            <field name="date" string="Fecha contable" attrs="{                                             'invisible': [('move_type', 'in', ('out_invoice', 'out_refund', 'out_receipt'))],                                             'readonly': [('state', '!=', 'draft')],                                        }" on_change="1" modifiers="{'invisible':[['move_type','in',['out_invoice','out_refund','out_receipt']]],'readonly':[['state','!=','draft']],'required':true}" id="date__4__"/>
                            <label for="invoice_payment_term_id" string="Fecha de vencimiento" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}" modifiers="{'invisible':[['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund','out_receipt','in_receipt']]]}"/>
                            <div class="d-flex" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}" modifiers="{'invisible':[['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund','out_receipt','in_receipt']]]}">
                                <field name="invoice_date_due" force_save="1" placeholder="Fecha" attrs="{'invisible': [('invoice_payment_term_id', '!=', False)]}" on_change="1" modifiers="{'invisible':[['invoice_payment_term_id','!=',false]],'readonly':[['state','not in',['draft']]]}" id="invoice_date_due"/>
                                <span class="o_form_label mx-3 oe_edit_only" attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('invoice_payment_term_id', '!=', False)]}" modifiers="{'invisible':['|',['state','!=','draft'],['invoice_payment_term_id','!=',false]]}">
                                    o 
                                </span>
                                <field name="invoice_payment_term_id" placeholder="Términos" on_change="1" can_create="true" can_write="true" modifiers="{'readonly':[['state','not in',['draft']]]}" id="invoice_payment_term_id"/>
                            </div>
                            <label for="journal_id" invisible="1" modifiers="{'invisible':true}"/>
                            <div name="journal_div" class="d-flex" invisible="context.get('default_journal_id') and context.get('move_type', 'entry') != 'entry'" modifiers="{}">
                                <field name="journal_id" options="{'no_create': True}" on_change="1" can_create="true" can_write="true" invisible="1" modifiers="{'invisible':true,'readonly':[['state','not in',['draft']]],'required':true}" id="journal_id"/>
                                <span class="oe_inline o_form_label mx-3 oe_read_only" invisible="1" modifiers="{'invisible':true}">
                                    en 
                                </span>
                                <span class="oe_inline o_form_label mr-3 ml-5 oe_edit_only" invisible="1" modifiers="{'invisible':true}">
                                    en 
                                </span>
                                <field name="currency_id" on_change="1" can_create="true" can_write="true" invisible="1" modifiers="{'invisible':true,'readonly':[['state','not in',['draft']]],'required':true}" id="currency_id"/>
                            </div>
                            <field name="l10n_latam_document_type_id" attrs="{'invisible': [('l10n_latam_use_documents', '=', False)], 'required': [('l10n_latam_use_documents', '=', True)], 'readonly': [('posted_before', '=', True)]}" domain="[('id', 'in', l10n_latam_available_document_type_ids)]" options="{'no_open': True, 'no_create': True}" on_change="1" can_create="true" can_write="true" modifiers="{'invisible':[['l10n_latam_use_documents','=',false]],'readonly':[['posted_before','=',true]],'required':[['l10n_latam_use_documents','=',true]]}" id="l10n_latam_document_type_id"/>
                            <field name="display_z_desde_hasta" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="display_z_desde_hasta"/>
                            <field name="z_desde" attrs="{'invisible': [('display_z_desde_hasta','=',False)]}" modifiers="{'invisible':[['display_z_desde_hasta','=',false]]}" id="z_desde"/>
                            <field name="z_hasta" attrs="{'invisible': [('display_z_desde_hasta','=',False)]}" modifiers="{'invisible':[['display_z_desde_hasta','=',false]]}" id="z_hasta"/>
                            <field name="l10n_latam_document_number" attrs="{'invisible': ['|', ('l10n_latam_use_documents', '=', False), ('l10n_latam_manual_document_number', '=', False), '|', '|', ('l10n_latam_use_documents', '=', False), ('highest_name', '!=', False), ('state', '!=', 'draft')], 'required': ['|', ('l10n_latam_manual_document_number', '=', True), ('highest_name', '=', False)], 'readonly': [('posted_before', '=', True), ('state', '!=', 'draft')]}" on_change="1" modifiers="{'invisible':['|',['l10n_latam_use_documents','=',false],['l10n_latam_manual_document_number','=',false],'|','|',['l10n_latam_use_documents','=',false],['highest_name','!=',false],['state','!=','draft']],'readonly':[['posted_before','=',true],['state','!=','draft']],'required':['|',['l10n_latam_manual_document_number','=',true],['highest_name','=',false]]}" id="l10n_latam_document_number"/>
                            <field name="edi_state" attrs="{'invisible': ['|', ('edi_state', '=', False), ('state', '=', 'draft')]}" modifiers="{'invisible':['|',['edi_state','=',false],['state','=','draft']],'readonly':true}" id="edi_state"/>
                        </group>
                    </group>
                    <notebook modifiers="{}">
                        <page id="invoice_tab" string="Líneas de factura" attrs="{'invisible': [('move_type', '=', 'entry')]}" modifiers="{'invisible':[['move_type','=','entry']]}">
                            <field name="invoice_line_ids" widget="section_and_note_one2many" mode="tree,kanban" context="{'default_move_type': context.get('default_move_type'), 'journal_id': journal_id, 'default_partner_id': commercial_partner_id, 'default_currency_id': currency_id or company_currency_id}" on_change="1" modifiers="{'readonly':[['state','not in',['draft']]]}" id="invoice_line_ids">
                            </field>
                            <group class="oe_subtotal_footer oe_right" attrs="{'invisible': ['|', ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt')),                                                                ('payment_state' ,'=', 'invoicing_legacy')]}" modifiers="{'invisible':['|',['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund','out_receipt','in_receipt']],['payment_state','=','invoicing_legacy']]}">
                                <field name="amount_tax" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="amount_tax"/>
                                <field name="amount_untaxed" attrs="{'invisible': [('amount_tax', '=', 0)]}" modifiers="{'invisible':[['amount_tax','=',0]],'readonly':true}" id="amount_untaxed"/>
                                <field name="amount_by_group" widget="tax-group-custom-field" nolabel="1" colspan="2" attrs="{'invisible': [('amount_tax', '=', 0)]}" modifiers="{'invisible':[['amount_tax','=',0]],'readonly':true}" id="amount_by_group"/>
                                <field name="amount_total" attrs="{'invisible': [('amount_tax', '!=', 0)]}" modifiers="{'invisible':[['amount_tax','!=',0]],'readonly':true}" id="amount_total"/>
                                <field name="amount_total" class="oe_subtotal_footer_separator" attrs="{'invisible': [('amount_tax', '=', 0)]}" modifiers="{'invisible':[['amount_tax','=',0]],'readonly':true}" id="amount_total__5__"/>
                                <field name="invoice_payments_widget" colspan="2" nolabel="1" widget="payment" modifiers="{'readonly':true}" id="invoice_payments_widget"/>
                                <field name="amount_residual" class="oe_subtotal_footer_separator" attrs="{'invisible': [('state', '=', 'draft')]}" modifiers="{'invisible':[['state','=','draft']],'readonly':true}" id="amount_residual"/>
                            </group>
                            <field name="narration" placeholder="Términos y condiciones" class="oe_inline" nolabel="1" modifiers="{}" id="narration"/>
                            <field name="invoice_outstanding_credits_debits_widget" class="oe_invoice_outstanding_credits_debits" colspan="2" nolabel="1" widget="payment" attrs="{'invisible': ['|', ('state', '!=', 'posted'), ('move_type', 'in', ('out_receipt', 'in_receipt'))]}" modifiers="{'invisible':['|',['state','!=','posted'],['move_type','in',['out_receipt','in_receipt']]],'readonly':true}" id="invoice_outstanding_credits_debits_widget"/>
                        </page>
                        <page id="aml_tab" string="Apuntes contables" invisible="1" modifiers="{'invisible':true}">
                            <div class="alert alert-info text-center mb-0" role="alert" attrs="{'invisible': ['|', ('payment_state', '!=', 'invoicing_legacy'), ('move_type', '=', 'entry')]}" modifiers="{'invisible':['|',['payment_state','!=','invoicing_legacy'],['move_type','=','entry']]}">
                                <span modifiers="{}">
                                    Se generó este asiento a través de la aplicación de Facturación, antes de instalar Contabilidad. Se importó el balance por separado.
                                </span>
                            </div>
                            <field name="line_ids" context="{'default_move_type': context.get('default_move_type'), 'line_ids': line_ids, 'journal_id': journal_id, 'default_partner_id': commercial_partner_id, 'default_currency_id': currency_id or company_currency_id}" attrs="{'invisible': [('payment_state', '=', 'invoicing_legacy'), ('move_type', '!=', 'entry')]}" on_change="1" modifiers="{'invisible':[['payment_state','=','invoicing_legacy'],['move_type','!=','entry']],'readonly':[['state','not in',['draft']]]}" id="line_ids"/>
                            <field name="move_tax_ids" readonly="1" attrs="{'invisible': [('move_type','=','entry')]}" modifiers="{'invisible':[['move_type','=','entry']],'readonly':true}" id="move_tax_ids"/>
                            <group string="Montos agrupados de impuestos" modifiers="{}">
                                <field name="vat_taxable_amount" modifiers="{'readonly':true}" id="vat_taxable_amount"/>
                                <field name="vat_amount" modifiers="{'readonly':true}" id="vat_amount"/>
                                <field name="other_taxes_amount" modifiers="{'readonly':true}" id="other_taxes_amount"/>
                                <field name="vat_untaxed_base_amount" modifiers="{'readonly':true}" id="vat_untaxed_base_amount"/>
                            </group>
                        </page>
                        <page id="other_tab" string="Otra Información" name="other_info" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund'))]}" modifiers="{'invisible':[['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund']]]}">
                            <group id="other_tab_group" modifiers="{}">
                                <group string="Factura" name="sale_info_group" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund'))]}" modifiers="{'invisible':[['move_type','not in',['out_invoice','out_refund']]]}">
                                    <label for="ref" string="Referencia de cliente" modifiers="{}"/>
                                    <field name="ref" nolabel="1" modifiers="{}" id="ref__6__"/>
                                    <field name="user_id" invisible="1" force_save="1" can_create="true" can_write="true" modifiers="{'invisible':true,'readonly':true}" id="user_id"/>
                                    <field name="invoice_user_id" domain="[('share', '=', False)]" widget="many2one_avatar_user" on_change="1" can_create="true" can_write="true" modifiers="{}" id="invoice_user_id"/>
                                    <field name="team_id" kanban_view_ref="496" can_create="true" can_write="true" modifiers="{}" id="team_id"/>
                                    <field name="invoice_origin" string="Documento de origen" force_save="1" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="invoice_origin"/>
                                    <field name="debit_origin_id" attrs="{'invisible': [('debit_origin_id', '=', False)]}" on_change="1" can_create="true" can_write="true" modifiers="{'invisible':[['debit_origin_id','=',false]],'readonly':true}" id="debit_origin_id__7__"/>
                                    <field name="partner_bank_id" context="{'default_partner_id': bank_partner_id}" domain="[('partner_id', '=', bank_partner_id)]" attrs="{'readonly': [('state', '!=', 'draft')]}" can_create="true" can_write="true" modifiers="{'readonly':[['state','!=','draft']]}" id="partner_bank_id__8__"/>
                                    <field name="qr_code_method" attrs="{'invisible': [('display_qr_code', '=', False)]}" modifiers="{'invisible':[['display_qr_code','=',false]]}" id="qr_code_method"/>
                                </group>
                                <group string="Contabilidad" name="accounting_info_group" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund'))]}" modifiers="{'invisible':[['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund']]]}">
                                    <field name="company_id" on_change="1" can_create="true" can_write="true" modifiers="{'readonly':true}" id="company_id"/>
                                    <field name="invoice_incoterm_id" can_create="true" can_write="true" modifiers="{}" id="invoice_incoterm_id"/>
                                    <field name="fiscal_position_id" can_create="true" can_write="true" modifiers="{'readonly':[['state','not in',['draft']]]}" id="fiscal_position_id"/>
                                    <field name="invoice_cash_rounding_id" on_change="1" can_create="true" can_write="true" invisible="1" modifiers="{'invisible':true,'readonly':[['state','not in',['draft']]]}" id="invoice_cash_rounding_id"/>
                                    <field name="invoice_source_email" widget="email" attrs="{'invisible': ['|', ('move_type', 'not in', ('in_invoice', 'in_refund')), ('invoice_source_email', '=', False)]}" modifiers="{'invisible':['|',['move_type','not in',['in_invoice','in_refund']],['invoice_source_email','=',false]]}" id="invoice_source_email"/>
                                    <field name="auto_post" attrs="{'readonly': ['|',('reversed_entry_id', '!=', False),('state','!=','draft')]}" modifiers="{'readonly':['|',['reversed_entry_id','!=',false],['state','!=','draft']]}" id="auto_post"/>
                                    <field name="to_check" modifiers="{}" id="to_check"/>
                                </group>
                                <group string="Marketing" name="utm_link" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund'))]}" modifiers="{'invisible':[['move_type','not in',['out_invoice','out_refund']]]}">
                                    <field name="campaign_id" can_create="true" can_write="true" modifiers="{}" id="campaign_id"/>
                                    <field name="medium_id" can_create="true" can_write="true" modifiers="{}" id="medium_id"/>
                                    <field name="source_id" can_create="true" can_write="true" modifiers="{}" id="source_id"/>
                                </group>
                                <group name="afip_group" string="AFIP" modifiers="{}">
                                    <field name="l10n_ar_afip_concept" attrs="{'invisible': ['|', ('country_code', '!=', 'AR'), ('l10n_latam_use_documents', '=', False)]}" modifiers="{'invisible':['|',['country_code','!=','AR'],['l10n_latam_use_documents','=',false]],'readonly':true}" id="l10n_ar_afip_concept"/>
                                    <label for="l10n_ar_afip_service_start" attrs="{'invisible':[('l10n_ar_afip_concept','not in',['2', '3', '4'])]}" string="Fecha del Servicio" modifiers="{'invisible':[['l10n_ar_afip_concept','not in',['2','3','4']]]}"/>
                                    <div attrs="{'invisible':[('l10n_ar_afip_concept','not in',['2', '3', '4'])]}" modifiers="{'invisible':[['l10n_ar_afip_concept','not in',['2','3','4']]]}">
                                        <field name="l10n_ar_afip_service_start" class="oe_inline" modifiers="{'readonly':[['state','not in',['draft']]]}" id="l10n_ar_afip_service_start"/>
                                        al 
                                        <field name="l10n_ar_afip_service_end" class="oe_inline" modifiers="{'readonly':[['state','not in',['draft']]]}" id="l10n_ar_afip_service_end"/>
                                    </div>
                                </group>
                            </group>
                        </page>
                        <page id="edi_documents" string="Documentos EDI" attrs="{'invisible': [('edi_document_ids', '=', [])]}" modifiers="{'invisible':[['edi_document_ids','=',[]]]}">
                            <field name="edi_document_ids" options="{'no_open': '1'}" on_change="1" modifiers="{}" id="edi_document_ids"/>
                        </page>
                        <page id="other_tab_entry" string="Otra Información" name="other_info" attrs="{'invisible': [('move_type', '!=', 'entry')]}" modifiers="{'invisible':[['move_type','!=','entry']]}">
                            <group id="other_tab_entry_group" modifiers="{}">
                                <group name="misc_group" modifiers="{}">
                                    <field name="auto_post" attrs="{'invisible': [('move_type', '!=', 'entry')], 'readonly': ['|',('reversed_entry_id', '!=', False),('state','!=','draft')]}" modifiers="{'invisible':[['move_type','!=','entry']],'readonly':['|',['reversed_entry_id','!=',false],['state','!=','draft']]}" id="auto_post__9__"/>
                                    <field name="reversed_entry_id" attrs="{'invisible': [('move_type', '!=', 'entry')]}" can_create="true" can_write="true" modifiers="{'invisible':[['move_type','!=','entry']],'readonly':true}" id="reversed_entry_id"/>
                                    <field name="to_check" attrs="{'invisible': [('move_type', '!=', 'entry')]}" modifiers="{'invisible':[['move_type','!=','entry']]}" id="to_check__10__"/>
                                </group>
                                <group modifiers="{}">
                                    <field name="company_id" required="1" on_change="1" can_create="true" can_write="true" modifiers="{'readonly':true,'required':true}" id="company_id__11__"/>
                                </group>
                            </group>
                            <field name="narration" placeholder="Agrega una nota interna..." nolabel="1" height="50" modifiers="{}" id="narration__12__"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="o_attachment_preview" attrs="{'invisible': ['|',                                 ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund')),                                 ('state', '!=', 'draft')]}" modifiers="{'invisible':['|',['move_type','not in',['out_invoice','out_refund','in_invoice','in_refund']],['state','!=','draft']]}"/>
                <div class="oe_chatter" modifiers="{}">
                    <field name="message_follower_ids" modifiers="{}" id="message_follower_ids"/>
                    <field name="activity_ids" modifiers="{}" id="activity_ids"/>
                    <field name="message_ids" modifiers="{}" id="message_ids"/>
                </div>
                <field name="l10n_latam_available_document_type_ids" invisible="1" on_change="1" can_create="true" can_write="true" modifiers="{'invisible':true,'readonly':true}" id="l10n_latam_available_document_type_ids"/>
                <field name="l10n_latam_use_documents" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="l10n_latam_use_documents"/>
                <field name="l10n_latam_manual_document_number" invisible="1" modifiers="{'invisible':true,'readonly':true}" id="l10n_latam_manual_document_number"/>
            </form>
        </field>
    </record>

</odoo>